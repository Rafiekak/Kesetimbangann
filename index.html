<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Simulator Kesetimbangan Mobil</title>
<style>
  body {
    margin: 0;
    background: skyblue;
    font-family: Arial;
  }
  canvas {
    display: block;
  }
  .panel {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(255,255,255,0.9);
    padding: 10px;
    border-radius: 8px;
  }
  button {
    margin: 3px;
  }
</style>
</head>
<body>

<canvas id="sim" width="900" height="500"></canvas>

<div class="panel">
  <b>Kontrol Simulator</b><br><br>

  Massa Mobil: <span id="massaVal">1000</span> kg<br>
  <input type="range" id="massa" min="500" max="2000" value="1000"><br><br>

  <button onclick="play()">‚ñ∂ Play</button>
  <button onclick="stop()">‚è∏ Stop</button>
  <button onclick="reset()">üîÑ Reset</button>
</div>

<script>
const canvas = document.getElementById("sim");
const ctx = canvas.getContext("2d");

const g = 9.8;
const theta = 10 * Math.PI / 180;
const mu = 0.6;

let m = 1000;
let x0 = 300, y0 = 280;
let x = x0, y = y0;
let v = 0;
let running = false;

// Slider massa
const massaSlider = document.getElementById("massa");
const massaVal = document.getElementById("massaVal");

massaSlider.oninput = function () {
  m = Number(this.value);
  massaVal.innerText = m;
};

// Tombol
function play() {
  running = true;
}
function stop() {
  running = false;
}
function reset() {
  running = false;
  x = x0;
  y = y0;
  v = 0;
}

// Background
function drawBackground() {
  ctx.fillStyle = "#3CB371";
  ctx.fillRect(0, 350, 900, 150);

  ctx.save();
  ctx.translate(0, 350);
  ctx.rotate(-theta);
  ctx.fillStyle = "#555";
  ctx.fillRect(0, -40, 900, 80);
  ctx.restore();

  drawTree(120, 320);
  drawTree(200, 330);
}

function drawTree(x, y) {
  ctx.fillStyle = "#8B4513";
  ctx.fillRect(x, y, 15, 40);
  ctx.beginPath();
  ctx.arc(x + 8, y - 10, 25, 0, Math.PI * 2);
  ctx.fillStyle = "green";
  ctx.fill();
}

// Mobil
function drawCar() {
  ctx.fillStyle = "red";
  ctx.fillRect(x, y - 20, 80, 20);
  ctx.beginPath();
  ctx.arc(x + 15, y, 10, 0, Math.PI * 2);
  ctx.arc(x + 65, y, 10, 0, Math.PI * 2);
  ctx.fillStyle = "black";
  ctx.fill();
}

// Info fisika
function drawText() {
  const Wp = m * g * Math.sin(theta);
  const N = m * g * Math.cos(theta);
  const Fg = mu * N;

  ctx.fillStyle = "black";
  ctx.font = "16px Arial";
  ctx.fillText("SIMULATOR KESETIMBANGAN MOBIL", 20, 30);
  ctx.fillText("Massa: " + m + " kg", 20, 55);
  ctx.fillText("Gaya Turun (mg sinŒ∏): " + Wp.toFixed(1) + " N", 20, 80);
  ctx.fillText("Gaya Gesek (ŒºN): " + Fg.toFixed(1) + " N", 20, 105);

  if (Wp <= Fg) {
    ctx.fillText("STATUS: SETIMBANG (Mobil Diam)", 20, 135);
  } else {
    ctx.fillText("STATUS: TIDAK SETIMBANG (Mobil Bergerak)", 20, 135);
  }
}

// Update fisika
function update() {
  if (!running) return;

  const Wp = m * g * Math.sin(theta);
  const N = m * g * Math.cos(theta);
  const Fg = mu * N;

  if (Wp > Fg) {
    v += 0.05;
    x += v;
    y += v * Math.tan(theta);
  }
}

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawBackground();
  drawCar();
  drawText();
  update();
  requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>

